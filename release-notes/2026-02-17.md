# OpenClaw v2026.2.17 版本發佈說明 (2026-02-17)

[GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.17)

## 概述

### 功能更新 (Features)
- ⭐⭐⭐ iOS 分享擴充：分享 URL/文字/圖片可直接轉送到 Gateway `agent.request` (#19424)
- ⭐⭐⭐ Slack 原生單則訊息串流（startStream/appendStream/stopStream），失敗自動降級 (#9972)
- ⭐⭐⭐ 新增 `/subagents spawn` 指令：可從聊天指令確定性啟動 subagent (#18218)
- ⭐⭐ 模型支援：Anthropic Sonnet 4.6（含 forward-compat fallback）
- ⭐⭐ 模型參數：Anthropic 1M context beta header（`params.context1m: true`）
- ⭐⭐ Telegram inline button `style`（primary/success/danger）支援 (#18241)
- ⭐⭐ Discord 互動元件可重複使用 + per-button allowedUsers 限制
- ⭐ 工具 Web UI：以意圖為先的 tool 詳情視圖與 exec 摘要 (#18592)
- ⭐ Cron/CLI：可設定 recurring cron 的預設錯開（stagger）並可 `--exact` 覆寫
- ⭐ Browser：新增 `extraArgs` 以傳入自訂 Chrome 啟動參數 (#18443)

### 安全性提升 (Security)
- ⭐⭐⭐ 修補 OC-09：阻擋 exec 環境變數注入造成的憑證竊取路徑 (#18048)
- ⭐⭐⭐ 強化 `$include`：限制 include 解析在頂層 config 目錄並防穿越/符號連結 (#18652)
- ⭐⭐ Session transcript 檔案預設 0o600 權限，並提供 audit 修復既有檔案權限
- ⭐⭐ Tools/Web：`web_search`/`web_fetch` URL allowlist (#18584)
- ⭐⭐ Cron/Webhook：強制有效 HTTP(S) URL 與分離 webhook/announce delivery 模式 (#17901)
- ⭐⭐ Discord：互動元件 per-button `allowedUsers` allowlist
- ⭐ exec 事前防護：偵測疑似 shell env var injection 片段再執行 (#12836)
- ⭐ iOS Talk：忽略 redacted/env-placeholder API keys，並支援 keychain override (#18163)
- ⭐ Discord/Commands：allowFrom 正規化（支援 user:/discord: 前綴與 mention）(#18042)
- ⭐ Config/Discord：強制 allowlist string ID 並提供 doctor repair (#18220)

### 錯誤修復 (Bug Fixes)
- ⭐⭐⭐ Subagents 工具結果上下文防爆：超大輸出截斷/壓縮避免 context overflow
- ⭐⭐⭐ Reply threading：串流/分段訊息保持 replyToId 黏著（含 iMessage/Telegram/Discord/Matrix）
- ⭐⭐ iOS Onboarding：避免未授權 gateway 錯誤導致重試迴圈/狀態抖動 (#19153)
- ⭐⭐ Telegram：streamMode=off 時禁用 block streaming，避免換行訊息被拆分 (#17679)
- ⭐⭐ CLI/Doctor：`--fix --non-interactive --yes` 完成後可正常結束不再掛住 (#18502)
- ⭐ Slack：限制轉送附件 ingestion，避免非 forward 附件汙染 inbound context
- ⭐ Telegram：poll action wiring 復原 (#18122)
- ⭐ Windows：session-store 原子寫入避免 context loss (#18347)
- ⭐ Process：先 SIGTERM 再 SIGKILL 終止 process tree (#18626)
- ⭐ Usage：token usage 報表隔離 last-turn totals 避免混算 (#18052)

## 功能更新 (Features) - by Star Rating

### ⭐⭐⭐ iOS 分享擴充：分享內容直送 Gateway `agent.request` (#19424)
- **用途**: 讓 iOS 使用者從系統分享面板直接把 URL/文字/圖片交給 OpenClaw。
- **解決問題**: 過去需要手動複製貼上或透過其他中繼流程，分享摩擦高。
- **影響**: 大幅降低「隨手丟給代理」的成本，提升行動端工作流流暢度。

### ⭐⭐⭐ Slack 原生單則訊息串流 (#9972)
- **用途**: 透過 Slack `chat.startStream/appendStream/stopStream` 在同一則訊息內即時更新。
- **解決問題**: 以往可能需要多則訊息或回覆拆段，thread 對齊與閱讀性較差。
- **影響**: 更一致的串流體驗，並在失敗時自動回退到一般送信以確保可靠性。

### ⭐⭐⭐ 新增 `/subagents spawn` 聊天指令 (#18218)
- **用途**: 從指令介面直接、可預期地啟動 subagent。
- **解決問題**: 過去啟動 subagent 多仰賴工具呼叫或模型自行決策，不易控管。
- **影響**: 讓使用者/操作者能以明確方式觸發長任務或專用子流程，提升可控性。

### ⭐⭐ Anthropic Sonnet 4.6 全面支援（含 forward-compat fallback）
- **用途**: 在 aliases/defaults 中加入 Sonnet 4.6，並在上游 catalog 尚未更新時提供相容性回退。
- **解決問題**: 新模型上線初期，模型清單更新延遲可能導致解析失敗或選不到模型。
- **影響**: 模型升級更平滑，減少配置與運維摩擦。

### ⭐⭐ Anthropic 1M context beta header（`params.context1m: true`）
- **用途**: 以 opt-in 方式映射到 `anthropic-beta: context-1m-2025-08-07`。
- **解決問題**: 想測試超長上下文時需手動處理 header/參數，易出錯。
- **影響**: 讓大上下文試驗更容易，但仍保留預設保守行為。

### ⭐⭐ Telegram inline button `style` 支援 (#18241)
- **用途**: 支援 `primary|success|danger` 按鈕樣式貫通 schema、解析與送信管線。
- **解決問題**: 互動按鈕缺乏視覺層級，重要操作不易凸顯。
- **影響**: 互動介面更清楚，降低誤觸與提升可用性。

### ⭐⭐ Discord 可重複互動元件 + per-button allowedUsers
- **用途**: 允許 `components.reusable=true` 並支援按鈕層級的 `allowedUsers` 白名單。
- **解決問題**: 元件過期/一次性限制使重複使用體驗差；群組內也缺乏點擊者限制。
- **影響**: 更安全且更可重用的互動工作流，特別適用於多人頻道。

### ⭐ Cron/CLI：頂點整點 recurring 任務預設錯開與 `--exact` 覆寫
- **用途**: 對 recurring top-of-hour cron 自動提供 deterministic stagger，並持久化 `schedule.staggerMs`。
- **解決問題**: 大量任務同秒觸發易造成尖峰、資源競爭與不穩定。
- **影響**: 改善高併發排程穩定性，同時保留需要精準觸發的例外路徑。

### ⭐ Tool Display/Web UI：意圖導向的 tool 詳情與 exec 摘要 (#18592)
- **用途**: 提供更聚焦的 tool 觀測與命令摘要。
- **解決問題**: 原始工具輸出資訊量大、不易快速抓到意圖與關鍵結果。
- **影響**: 降低排障時間，提高營運可觀測性。

### ⭐ Browser：新增 Chrome `extraArgs` (#18443)
- **用途**: 允許自訂 Chromium/Chrome 啟動參數。
- **解決問題**: 特定環境需加參數（代理、旗標、相容性）時缺乏正式入口。
- **影響**: 提升瀏覽器自動化在多環境部署的彈性。

## 安全性提升 (Security) - by Star Rating

### ⭐⭐⭐ 修補 OC-09：環境變數注入導致的憑證竊取 (#18048)
- **用途**: 修補 exec 相關的 credential-theft 攻擊面。
- **解決問題**: 惡意輸入可能藉由環境變數注入影響執行內容，造成憑證外洩風險。
- **影響**: 降低高風險攻擊面，對使用 exec 的工作流尤其重要。

### ⭐⭐⭐ `$include` 解析限制與路徑防護強化 (#18652)
- **用途**: 將 `$include` 解析限制在頂層 config 目錄，並強化 traversal/symlink 檢查。
- **解決問題**: 若 include 可跨目錄解析，可能造成讀取不該被讀取的檔案。
- **影響**: 減少配置層面的檔案外洩與繞路風險，並提供 doctor 提示協助修復。

### ⭐⭐ Session transcript 檔案權限預設 0o600 + audit 修復
- **用途**: 新建立的 transcript JSONL 檔案以使用者私有權限建立，並擴充 audit 修復既有檔案。
- **解決問題**: 多使用者/共享環境下，寬鬆檔案權限可能造成對話內容外洩。
- **影響**: 強化本機資料保護，降低落地資料被非預期讀取的機率。

### ⭐⭐ Tools/Web URL allowlist (#18584)
- **用途**: 對 `web_search`/`web_fetch` 增加可控的 URL allowlist。
- **解決問題**: 任意抓取 URL 可能引入 SSRF 類風險或存取不可信來源。
- **影響**: 提升 Web 工具呼叫的安全邊界，便於符合企業網路政策。

### ⭐⭐ Cron/Webhook URL 驗證與 delivery 模式拆分 (#17901)
- **用途**: 分離 per-job webhook delivery 與 announce delivery，並強制 webhook URL 為有效 HTTP(S)。
- **解決問題**: 混用模式與弱驗證可能造成誤送/誤設或不安全的 URL。
- **影響**: 讓 cron 外送更可控、更安全，也降低舊設定遷移的風險。

### ⭐ Discord per-button `allowedUsers` 白名單
- **用途**: 針對互動元件按鈕提供點擊者限制。
- **解決問題**: 多人頻道中，任何人都能觸發操作可能導致越權或誤操作。
- **影響**: 提升互動式自動化在多人場景的安全性。

### ⭐ exec 前置 shell env var injection 偵測 (#12836)
- **用途**: 在執行前偵測疑似混雜 shell 片段/環境變數注入模式。
- **解決問題**: 模型輸出若夾雜不安全的 shell 片段，可能導致非預期行為。
- **影響**: 降低錯誤與風險，特別是在 cron/自動化情境。

### ⭐ iOS Talk：忽略 redacted/placeholder API keys 並支援 keychain override (#18163)
- **用途**: 避免把已遮罩或 placeholder 的 key 當成真實金鑰使用。
- **解決問題**: 配置中若存在遮罩字串，可能導致錯誤連線或不安全的 key 處理。
- **影響**: 提升行動端語音模式的安全與穩定性。

### ⭐ Discord/Commands allowFrom 正規化 (#18042)
- **用途**: 支援 `user:`/`discord:`/`pk:` 前綴與 mention 格式一致化。
- **解決問題**: allowlist 格式不一致會導致授權判斷落差。
- **影響**: 減少誤授權/誤拒絕，讓指令權限更可預期。

### ⭐ Config/Discord：強制 string IDs + doctor repair (#18220)
- **用途**: 讓 Discord allowlist/設定欄位以字串 ID 為準並提供修復。
- **解決問題**: 數字型態/輸入差異會造成解析或比對錯誤。
- **影響**: 降低配置錯誤導致的權限風險與運維成本。

## 錯誤修復 (Bug Fixes) - by Star Rating

### ⭐⭐⭐ Subagents：工具結果上下文防爆與壓縮策略
- **用途**: 在模型呼叫前主動截斷過大輸出、壓縮最舊 tool-result 以避免 context overflow。
- **解決問題**: 長任務或多工具鏈會累積大量輸出，導致超窗崩潰或中斷。
- **影響**: 顯著提升 subagent 長流程穩定性，減少「跑到一半爆掉」。

### ⭐⭐⭐ Reply threading：串流/分段訊息保持 replyToId 黏著
- **用途**: 在 streamed/split chunk 送信時維持同一 reply context，並保留各通道 replyToId。
- **解決問題**: 回覆被拆段後可能脫離原訊息，造成對話脈絡混亂。
- **影響**: 改善 Telegram/Discord/iMessage/Matrix 等通道的閱讀與追蹤一致性。

### ⭐⭐ iOS Onboarding：停止未授權錯誤造成的重試迴圈 (#19153)
- **用途**: 在 unauthorized/missing-token 時暫停重連並保持狀態可手動重試。
- **解決問題**: 持續重試會造成電量消耗、使用者困惑與狀態抖動。
- **影響**: 配對/授權流程更穩定、可理解。

### ⭐⭐ Telegram：streamMode=off 禁用 block streaming (#17679)
- **用途**: 當 streamMode 關閉時避免換行/區塊內容被拆成多則。
- **解決問題**: 關閉串流仍被拆訊息會嚴重影響閱讀。
- **影響**: 對偏好單則訊息輸出的使用者體驗更一致。

### ⭐⭐ CLI/Doctor：非互動修復完成後正常結束 (#18502)
- **用途**: 讓 `openclaw doctor --fix --non-interactive --yes` 不再無限等待。
- **解決問題**: 自動化/CI 會因掛住而浪費資源。
- **影響**: 提升一鍵修復在自動化環境的可靠性。

### ⭐ Slack：限制轉送附件 ingestion
- **用途**: 僅處理明確 shared-message 的附件，跳過非 Slack forwarded `image_url` 抓取。
- **解決問題**: 非預期附件解析可能把不相關內容塞進模型上下文。
- **影響**: 降低上下文汙染並維持 forward 訊息行為。

### ⭐ Telegram：Polls wiring 復原 (#18122)
- **用途**: 修復 Telegram poll action 在 channel handlers 的接線。
- **解決問題**: 投票互動失效會讓自動化/互動流程中斷。
- **影響**: 恢復 Telegram 投票功能可用性。

### ⭐ Sessions/Windows：原子寫入避免 context loss (#18347)
- **用途**: 以原子方式寫 session-store。
- **解決問題**: 非原子寫入在當機/中斷時可能造成檔案毀損與內容遺失。
- **影響**: 提升 Windows 環境下的會話可靠性。

### ⭐ Process：先 SIGTERM 再 SIGKILL 終止 process tree (#18626)
- **用途**: 更優雅地終止子程序樹。
- **解決問題**: 直接 SIGKILL 可能造成暫存/資源未釋放。
- **影響**: 降低殘留程序與資源泄漏風險。

### ⭐ Usage：last-turn totals 隔離避免混算 (#18052)
- **用途**: 讓 token usage 報表顯示更準確。
- **解決問題**: 混算會誤導成本與用量分析。
- **影響**: 更可信的用量追蹤與成本控管。

## 總結

| 類別 | 3 顆星 | 2 顆星 | 1 顆星 | 摘要 |
|------|--------|--------|--------|------|
| 功能更新 | 3 | 4 | 3 | 行動端分享/Slack 串流/subagents 指令為亮點，並補齊多通道互動能力與排程彈性。 |
| 安全性 | 2 | 4 | 4 | 修補 exec 憑證竊取與 include 路徑風險，並加強檔案權限、URL 白名單與互動授權控管。 |
| 錯誤修復 | 2 | 3 | 5 | 以 subagents 上下文防爆與 reply threading 為主，並修復 iOS/Telegram/CLI/Windows 等多處穩定性問題。 |
| **總計** | **7** | **11** | **12** | **30** |

**發佈日期**: 2026-02-17  
**版本**: 2026.2.17  
**狀態**: Production Ready  
**GitHub Release**: https://github.com/openclaw/openclaw/releases/tag/v2026.2.17
